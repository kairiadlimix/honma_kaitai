# 画面設計書：重機稼働予測ダッシュボード

## 1. 画面構成概要

### 1.1 画面一覧

| 画面ID | 画面名 | パス | 説明 |
|--------|--------|------|------|
| DASH-001 | 全社サマリー | `/` | 経営層向けの全体像 |
| DASH-002 | 重機一覧 | `/machines` | 全重機の一覧表示 |
| DASH-003 | 重機個別 | `/machines/[id]` | 特定重機の詳細情報 |
| DASH-004 | 故障リスク分析 | `/risk-analysis` | 故障リスクの分析 |
| DASH-005 | 稼働ランキング | `/rankings` | 稼働状況のランキング |
| DASH-006 | 消耗品管理 | `/consumables` | 消耗品の使用状況 |
| DASH-007 | コスト分析 | `/cost-analysis` | コストの詳細分析 |

### 1.2 画面遷移図

```
┌─────────────┐
│  全社サマリー│ ← トップページ
└──────┬──────┘
       │
       ├─→ 重機一覧 ──→ 重機個別
       │
       ├─→ 故障リスク分析
       │
       ├─→ 稼働ランキング
       │
       ├─→ 消耗品管理
       │
       └─→ コスト分析
```

---

## 2. 共通レイアウト

### 2.1 ヘッダー

```
┌─────────────────────────────────────────────────────────┐
│ [ロゴ] 重機稼働予測ダッシュボード          [ユーザー名] │
└─────────────────────────────────────────────────────────┘
```

**要素**:
- 左側: ロゴ + アプリ名
- 右側: ユーザー名（将来拡張時）

**高さ**: 64px
**背景色**: 白（#FFFFFF）
**影**: 下に軽い影

---

### 2.2 サイドバー

```
┌─────┐
│ 📊  │ 全社サマリー
│ 🏗️  │ 重機一覧
│ 🔧  │ 重機個別
│ ⚠️  │ 故障リスク分析
│ 📈  │ 稼働ランキング
│ 🛢️  │ 消耗品管理
│ 💰  │ コスト分析
└─────┘
```

**要素**:
- アイコン + メニュー名
- アクティブなメニューはハイライト表示
- 折りたたみ可能（モバイル対応）

**幅**: 240px（展開時）、64px（折りたたみ時）
**背景色**: グレー（#F5F5F5）

---

### 2.3 メインコンテンツエリア

**パディング**: 24px
**背景色**: 白（#FFFFFF）
**最大幅**: 1400px（中央配置）

---

## 3. 画面詳細設計

### 3.1 DASH-001: 全社サマリービュー

#### 3.1.1 レイアウト

```
┌─────────────────────────────────────────────────────────┐
│ 全社サマリー                                              │
├─────────────────────────────────────────────────────────┤
│ ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐ │
│ │総重機 │ │稼働中│ │整備中│ │入庫中│ │稼働率│ │総コスト│ │
│ │  20台│ │ 15台 │ │  3台 │ │  2台 │ │ 65% │ │ 500万円│ │
│ └──────┘ └──────┘ └──────┘ └──────┘ └──────┘ └──────┘ │
├─────────────────────────────────────────────────────────┤
│ ┌────────────────────┐ ┌────────────────────┐           │
│ │ 稼働率の推移       │ │ コスト内訳         │           │
│ │ (折れ線グラフ)     │ │ (円グラフ)         │           │
│ │                    │ │                    │           │
│ └────────────────────┘ └────────────────────┘           │
├─────────────────────────────────────────────────────────┤
│ ┌────────────────────┐ ┌────────────────────┐           │
│ │ 重機クラス別稼働率 │ │ メーカー別比較     │           │
│ │ (棒グラフ)         │ │ (棒グラフ)         │           │
│ │                    │ │                    │           │
│ └────────────────────┘ └────────────────────┘           │
├─────────────────────────────────────────────────────────┤
│ ⚠️ アラート・通知                                        │
│ • 故障リスクが高い重機: 3台                              │
│ • 特自検期限が近い重機: 2台                              │
│ • 稼働率が低い重機: 5台                                  │
└─────────────────────────────────────────────────────────┘
```

#### 3.1.2 KPIカード

**カード1: 総重機台数**
- **値**: 20台
- **色**: 青（#3B82F6）
- **アイコン**: 🏗️

**カード2: 稼働中台数**
- **値**: 15台
- **色**: 緑（#10B981）
- **アイコン**: ✅

**カード3: 整備中台数**
- **値**: 3台
- **色**: 黄（#F59E0B）
- **アイコン**: 🔧

**カード4: 入庫中台数**
- **値**: 2台
- **色**: グレー（#6B7280）
- **アイコン**: 📦

**カード5: 全体稼働率**
- **値**: 65%
- **色**: 紫（#8B5CF6）
- **アイコン**: 📊
- **前月比**: +5%（緑の矢印↑）

**カード6: 今月の総コスト**
- **値**: 500万円
- **色**: オレンジ（#F97316）
- **アイコン**: 💰
- **前月比**: -10万円（緑の矢印↓）

#### 3.1.3 グラフ

**グラフ1: 稼働率の推移（折れ線グラフ）**
- **X軸**: 月（過去6ヶ月）
- **Y軸**: 稼働率（%）
- **系列**: 全体稼働率
- **色**: 青（#3B82F6）

**グラフ2: コスト内訳（円グラフ）**
- **項目**: 整備費、消耗品費、部品交換費
- **色**: 整備費（青）、消耗品費（緑）、部品交換費（オレンジ）

**グラフ3: 重機クラス別稼働率（棒グラフ）**
- **X軸**: 重機クラス（SK235、ZX200など）
- **Y軸**: 稼働率（%）
- **色**: 各クラスごとに異なる色

**グラフ4: メーカー別比較（棒グラフ）**
- **X軸**: メーカー（コベルコ、日立）
- **Y軸**: 平均稼働率（%）
- **色**: コベルコ（青）、日立（オレンジ）

#### 3.1.4 アラート・通知セクション

- **故障リスクが高い重機**: 3台（クリックで詳細へ）
- **特自検期限が近い重機**: 2台（1ヶ月以内）
- **稼働率が低い重機**: 5台（40%未満）

---

### 3.2 DASH-002: 重機一覧ビュー

#### 3.2.1 レイアウト

```
┌─────────────────────────────────────────────────────────┐
│ 重機一覧                                    [フィルター] │
├─────────────────────────────────────────────────────────┤
│ メーカー: [すべて ▼] クラス: [すべて ▼] ステータス: [すべて ▼] │
├─────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 管理番号 │ メーカー │ クラス │ ステータス │ 稼働率 │ ... │ │
│ ├─────────────────────────────────────────────────────┤ │
│ │ SK-001  │ コベルコ │ SK235  │ 稼働中    │  70%  │ ... │ │
│ │ SK-002  │ コベルコ │ SK200  │ 整備中    │  45%  │ ... │ │
│ │ ZX-001  │ 日立     │ ZX200  │ 稼働中    │  80%  │ ... │ │
│ │ ...     │ ...      │ ...    │ ...       │ ...   │ ... │ │
│ └─────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

#### 3.2.2 テーブルカラム

| カラム名 | 幅 | ソート | 説明 |
|---------|-----|--------|------|
| 管理番号 | 120px | ✅ | クリックで個別ページへ |
| メーカー | 100px | ✅ | コベルコ/日立 |
| 重機クラス | 100px | ✅ | SK235、ZX200など |
| ステータス | 100px | ✅ | 稼働中/整備中/入庫中 |
| 累計稼働時間 | 120px | ✅ | 時間単位 |
| 今月の稼働時間 | 120px | ✅ | 時間単位 |
| 稼働率 | 100px | ✅ | %表示、カラーコード |
| 故障リスク | 100px | ✅ | ★1〜5表示 |
| 年間コスト | 120px | ✅ | 万円単位 |
| 最終メンテ日 | 120px | ✅ | YYYY-MM-DD |
| アクション | 80px | - | 詳細ボタン |

#### 3.2.3 フィルター

**メーカー**:
- すべて
- コベルコ
- 日立

**重機クラス**:
- すべて
- SK235
- SK200
- ZX200
- ZX160
- ...

**ステータス**:
- すべて
- 稼働中
- 整備中
- 入庫中

**故障リスク**:
- すべて
- ★5（最高リスク）
- ★4以上
- ★3以上

#### 3.2.4 ソート機能

- デフォルト: 稼働率（降順）
- クリックで昇順/降順切り替え
- 複数カラムでのソート（将来拡張）

#### 3.2.5 ページネーション

- 1ページあたり20件
- ページ番号表示
- 前へ/次へボタン

---

### 3.3 DASH-003: 重機個別ビュー

#### 3.3.1 レイアウト

```
┌─────────────────────────────────────────────────────────┐
│ ← 戻る  SK-001 (コベルコ SK235)                          │
├─────────────────────────────────────────────────────────┤
│ ┌────────────────────┐ ┌────────────────────┐           │
│ │ 基本情報            │ │ 現在のステータス    │           │
│ │ • 管理番号: SK-001 │ │ • ステータス: 稼働中│           │
│ │ • シリアル: ...    │ │ • 稼働率: 70%      │           │
│ │ • 年式: 2018年     │ │ • 故障リスク: ★3   │           │
│ │ • 購入日: 2018/04  │ │ • 次回メンテ: 2024/02│          │
│ └────────────────────┘ └────────────────────┘           │
├─────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 稼働状況                                            │ │
│ │ ┌─────────────────────────────────────────────────┐ │ │
│ │ │ 月次稼働時間の推移 (折れ線グラフ)               │ │ │
│ │ └─────────────────────────────────────────────────┘ │ │
│ │ 累計稼働時間: 5,200時間                              │ │
│ │ 今月の稼働時間: 140時間                              │ │
│ └─────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────┤
│ ┌────────────────────┐ ┌────────────────────┐           │
│ │ メンテナンス履歴    │ │ 故障・不調情報     │           │
│ │ • 2024/01/15 特自検│ │ • 故障リスク: ★3  │           │
│ │ • 2023/12/10 オイル│ │ • 不調項目: 2件   │           │
│ │ • 2023/11/05 部品  │ │ • 最終チェック: ...│           │
│ └────────────────────┘ └────────────────────┘           │
├─────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────┐ │
│ │ コスト情報                                          │ │
│ │ ┌─────────────────────────────────────────────────┐ │ │
│ │ │ 月次コスト推移 (棒グラフ)                        │ │ │
│ │ └─────────────────────────────────────────────────┘ │ │
│ │ 年間コスト: 120万円                                  │ │
│ │ • 整備費: 80万円                                     │ │
│ │ • 消耗品費: 30万円                                   │ │
│ │ • 部品交換費: 10万円                                 │ │
│ │ 1時間あたりコスト: 230円                             │ │
│ └─────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

#### 3.3.2 タブ構成（代替案）

```
┌─────────────────────────────────────────────────────────┐
│ [基本情報] [稼働状況] [メンテ履歴] [故障情報] [コスト]    │
└─────────────────────────────────────────────────────────┘
```

#### 3.3.3 基本情報セクション

- 管理番号
- シリアル番号
- メーカー
- 重機クラス
- 型式
- 年式
- 購入年月日
- 特自検期限

#### 3.3.4 稼働状況セクション

- **グラフ**: 月次稼働時間の推移（折れ線グラフ、過去12ヶ月）
- **数値**:
  - 累計稼働時間
  - 今月の稼働時間
  - 平均日次稼働時間
  - 稼働率

#### 3.3.5 メンテナンス履歴セクション

- **テーブル形式**:
  - 実施日
  - メンテナンス種別
  - コスト
  - 実施内容
  - 詳細ボタン

#### 3.3.6 故障・不調情報セクション

- **故障リスクスコア**: ★1〜5表示
- **不調チェック項目**: リスト表示
- **故障傾向グラフ**: 時系列での不調項目数

#### 3.3.7 コスト情報セクション

- **グラフ**: 月次コスト推移（棒グラフ、過去12ヶ月）
- **内訳**:
  - 整備費
  - 消耗品費
  - 部品交換費
- **計算値**:
  - 年間コスト
  - 1時間あたりコスト

---

### 3.4 DASH-004: 故障リスク分析ビュー

#### 3.4.1 レイアウト

```
┌─────────────────────────────────────────────────────────┐
│ 故障リスク分析                                            │
├─────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 故障リスクランキング TOP10                           │ │
│ │ ┌──────┬────────┬──────┬──────────────┐            │ │
│ │ │ 順位 │ 管理番号│ リスク│ リスク要因    │            │ │
│ │ ├──────┼────────┼──────┼──────────────┤            │ │
│ │ │  1   │ SK-005 │ ★5  │ 不調項目: 8件│            │ │
│ │ │  2   │ ZX-003 │ ★5  │ 不調項目: 7件│            │ │
│ │ │ ...  │ ...    │ ... │ ...          │            │ │
│ │ └──────┴────────┴──────┴──────────────┘            │ │
│ └─────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────┤
│ ┌────────────────────┐ ┌────────────────────┐           │
│ │ 重機クラス別故障率 │ │ メーカー別故障率   │           │
│ │ (棒グラフ)         │ │ (棒グラフ)         │           │
│ │                    │ │                    │           │
│ └────────────────────┘ └────────────────────┘           │
├─────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 要注意重機リスト (★4以上)                            │ │
│ │ • SK-005 (★5) - 整備推奨                             │ │
│ │ • ZX-003 (★5) - 買い替え検討                         │ │
│ │ • SK-010 (★4) - 整備推奨                             │ │
│ └─────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

#### 3.4.2 故障リスクランキング

**テーブルカラム**:
- 順位
- 管理番号（クリックで個別ページへ）
- 故障リスクスコア（★1〜5、カラーコード）
- リスク要因（不調項目数、メンテ頻度など）

#### 3.4.3 故障傾向分析グラフ

**グラフ1: 重機クラス別故障発生率**
- X軸: 重機クラス
- Y軸: 故障発生率（%）
- 計算: 不調項目がある重機数 / 総重機数

**グラフ2: メーカー別故障発生率**
- X軸: メーカー（コベルコ、日立）
- Y軸: 故障発生率（%）

**グラフ3: 不調チェック項目の出現頻度**
- X軸: チェック項目名
- Y軸: 出現回数

#### 3.4.4 要注意重機リスト

- 故障リスクスコアが★4以上の重機
- 推奨アクション表示（整備推奨、買い替え検討など）

---

### 3.5 DASH-005: 稼働ランキングビュー

#### 3.5.1 レイアウト

```
┌─────────────────────────────────────────────────────────┐
│ 稼働ランキング                                            │
├─────────────────────────────────────────────────────────┤
│ [稼働時間] [稼働率] [コスト効率]                         │
├─────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 月次稼働時間 TOP10                                    │ │
│ │ ┌──────┬────────┬──────────┬──────────┐           │ │
│ │ │ 順位 │ 管理番号│ 稼働時間 │ 前月比    │           │ │
│ │ ├──────┼────────┼──────────┼──────────┤            │ │
│ │ │  1   │ ZX-001 │ 180時間  │ +10時間↑ │            │ │
│ │ │  2   │ SK-003 │ 170時間  │ +5時間↑  │            │ │
│ │ │ ...  │ ...    │ ...      │ ...      │            │ │
│ │ └──────┴────────┴──────────┴──────────┘           │ │
│ └─────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────┤
│ ┌────────────────────┐ ┌────────────────────┐           │
│ │ 稼働率ランキング   │ │ コスト効率ランキング│           │
│ │ (テーブル)         │ │ (テーブル)         │           │
│ │                    │ │                    │           │
│ └────────────────────┘ └────────────────────┘           │
└─────────────────────────────────────────────────────────┘
```

#### 3.5.2 タブ構成

- **稼働時間**: 月次稼働時間のランキング
- **稼働率**: 稼働率のランキング
- **コスト効率**: 1時間あたりコストのランキング（低い順=効率的）

#### 3.5.3 ランキングテーブル

**カラム**:
- 順位
- 管理番号（クリックで個別ページへ）
- 値（稼働時間/稼働率/コスト）
- 前月比（増減表示、矢印アイコン）

#### 3.5.4 比較分析グラフ

**グラフ1: 重機クラス別平均稼働率**
- X軸: 重機クラス
- Y軸: 平均稼働率（%）

**グラフ2: メーカー別平均稼働率**
- X軸: メーカー
- Y軸: 平均稼働率（%）

---

### 3.6 DASH-006: 消耗品管理ビュー

#### 3.6.1 レイアウト

```
┌─────────────────────────────────────────────────────────┐
│ 消耗品管理                                                │
├─────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 消耗品別の使用状況                                    │ │
│ │ ┌──────────┬──────┬──────┬──────┬──────┐          │ │
│ │ │ 消耗品    │ 使用量│ 単価 │ 総コスト│ 消耗率│          │ │
│ │ ├──────────┼──────┼──────┼──────┼──────┤          │ │
│ │ │ オイル    │ 500L │ 800円│ 40万円│ 0.1L/h│          │ │
│ │ │ フィルター│ 50個 │ 2000円│ 10万円│ 0.01個/h│        │ │
│ │ │ ...      │ ...  │ ...  │ ...  │ ...  │          │ │
│ │ └──────────┴──────┴──────┴──────┴──────┘          │ │
│ └─────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────┤
│ ┌────────────────────┐ ┌────────────────────┐           │
│ │ 消耗品コスト推移   │ │ 消耗品コスト内訳   │           │
│ │ (折れ線グラフ)     │ │ (円グラフ)         │           │
│ │                    │ │                    │           │
│ └────────────────────┘ └────────────────────┘           │
├─────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 消耗品ランキング                                      │ │
│ │ • 使用量が多い消耗品 TOP10                           │ │
│ │ • コストが高い消耗品 TOP10                           │ │
│ └─────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

#### 3.6.2 消耗品別使用状況テーブル

**カラム**:
- 消耗品種別（オイル、フィルター、グリスなど）
- 使用量（月次、年間）
- 単価
- 総コスト
- 消耗率（使用量/稼働時間）

#### 3.6.3 グラフ

**グラフ1: 消耗品コスト推移**
- X軸: 月（過去6ヶ月）
- Y軸: コスト（万円）
- 系列: 各消耗品種別

**グラフ2: 消耗品コスト内訳**
- 円グラフ
- 項目: オイル、フィルター、グリスなど

#### 3.6.4 消耗品ランキング

- **使用量が多い消耗品 TOP10**
- **コストが高い消耗品 TOP10**

---

### 3.7 DASH-007: コスト分析ビュー

#### 3.7.1 レイアウト

```
┌─────────────────────────────────────────────────────────┐
│ コスト分析                                                │
├─────────────────────────────────────────────────────────┤
│ ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐                    │
│ │総コスト│ │整備費│ │消耗品│ │部品費│                    │
│ │500万円│ │300万円│ │150万円│ │50万円│                    │
│ └──────┘ └──────┘ └──────┘ └──────┘                    │
├─────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 月次コスト推移 (折れ線グラフ)                         │ │
│ │                                                      │ │
│ └─────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────┤
│ ┌────────────────────┐ ┌────────────────────┐           │
│ │ コスト内訳         │ │ 重機別コスト       │           │
│ │ (円グラフ)         │ │ (棒グラフ)         │           │
│ │                    │ │                    │           │
│ └────────────────────┘ └────────────────────┘           │
├─────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 重機別コストランキング                                │ │
│ │ • 年間コストが高い重機 TOP10                         │ │
│ │ • 1時間あたりコストが高い重機 TOP10                  │ │
│ └─────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

#### 3.7.2 コストサマリーカード

- **総コスト**: 年間総コスト
- **整備費**: 年間整備費
- **消耗品費**: 年間消耗品費
- **部品交換費**: 年間部品交換費

#### 3.7.3 グラフ

**グラフ1: 月次コスト推移**
- X軸: 月（過去12ヶ月）
- Y軸: コスト（万円）
- 系列: 総コスト、整備費、消耗品費、部品交換費

**グラフ2: コスト内訳**
- 円グラフ
- 項目: 整備費、消耗品費、部品交換費

**グラフ3: 重機別コスト**
- X軸: 重機（管理番号）
- Y軸: 年間コスト（万円）
- 棒グラフ

#### 3.7.4 コストランキング

- **年間コストが高い重機 TOP10**
- **年間コストが低い重機 TOP10**
- **1時間あたりコストが高い重機 TOP10**

---

## 4. UI/UX詳細

### 4.1 カラーパレット

| 用途 | カラーコード | 説明 |
|------|------------|------|
| プライマリ | #3B82F6 | 青（リンク、ボタン） |
| 成功 | #10B981 | 緑（正常状態） |
| 警告 | #F59E0B | 黄（注意状態） |
| エラー | #EF4444 | 赤（エラー、危険） |
| 情報 | #8B5CF6 | 紫（情報表示） |
| 背景 | #F5F5F5 | グレー（背景） |
| テキスト | #1F2937 | ダークグレー（本文） |

### 4.2 タイポグラフィ

| 要素 | フォントサイズ | フォントウェイト |
|------|--------------|----------------|
| 見出し1 | 32px | Bold |
| 見出し2 | 24px | Bold |
| 見出し3 | 20px | SemiBold |
| 本文 | 16px | Regular |
| 小さいテキスト | 14px | Regular |

### 4.3 スペーシング

- **カード間**: 24px
- **セクション間**: 32px
- **要素間**: 16px

### 4.4 レスポンシブデザイン

**ブレークポイント**:
- **モバイル**: < 640px
- **タブレット**: 640px - 1024px
- **デスクトップ**: > 1024px

**モバイル対応**:
- サイドバーを折りたたみ
- テーブルを横スクロール
- カードを縦並び

---

## 5. インタラクション

### 5.1 ホバー効果

- **リンク**: 下線表示、色変更
- **ボタン**: 背景色変更、影追加
- **カード**: 影を強調

### 5.2 ローディング状態

- **スケルトンローディング**: データ読み込み中
- **スピナー**: ボタンクリック時

### 5.3 エラー表示

- **トースト通知**: エラーメッセージ表示
- **インラインエラー**: フォーム内エラー表示

---

## 6. アクセシビリティ

### 6.1 キーボード操作

- Tabキーでナビゲーション
- Enterキーでアクション実行
- Escキーでモーダル閉じる

### 6.2 スクリーンリーダー対応

- 適切なaria-label設定
- セマンティックHTML使用

---

## 7. パフォーマンス

### 7.1 最適化

- **画像**: Next.js Imageコンポーネント使用
- **コード分割**: 動的インポート
- **キャッシュ**: TanStack Queryのキャッシュ機能

### 7.2 読み込み時間目標

- **初回読み込み**: 3秒以内
- **画面遷移**: 1秒以内
- **データ取得**: 2秒以内

---

## 8. 次のステップ

1. **コンポーネント設計**: shadcn/uiコンポーネントの選定
2. **プロトタイプ作成**: Figma等でプロトタイプ作成
3. **実装開始**: Next.jsプロジェクト作成

