# 環境変数設定ガイド（3番の手順）

## 📍 どこで作業するか

**`dashboard`ディレクトリ内**で作業します。

```bash
cd /Users/kairi.oshima/honma_kaitai/dashboard
```

## 📝 何を作るか

**`.env.local`というファイル**を作成します。

## 🔧 具体的な手順

### ステップ1: dashboardディレクトリに移動

ターミナルで：
```bash
cd /Users/kairi.oshima/honma_kaitai/dashboard
```

### ステップ2: .env.localファイルを作成

ターミナルで以下を実行：
```bash
touch .env.local
```

または、エディタ（VS Code、テキストエディットなど）で新規ファイルを作成：
- ファイル名: `.env.local`
- 場所: `dashboard`ディレクトリ内

### ステップ3: ファイルに内容を書き込む

`.env.local`ファイルを開いて、以下をコピー＆ペースト：

```env
# Google Sheets (サービスアカウント情報)
GOOGLE_SERVICE_ACCOUNT_EMAIL="ここにJSONのclient_emailを貼り付け"
GOOGLE_SERVICE_ACCOUNT_PRIVATE_KEY="ここにJSONのprivate_keyを貼り付け"

# Google Sheets ID (後で設定)
GOOGLE_SHEETS_ID=""
```

### ステップ4: JSONファイルから情報を取得

Google Cloud ConsoleでダウンロードしたJSONファイルを開きます。

**例**:
```json
{
  "type": "service_account",
  "project_id": "your-project-id",
  "private_key_id": "abc123...",
  "private_key": "-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC...\n-----END PRIVATE KEY-----\n",
  "client_email": "honma-kaitai-dashboard@your-project.iam.gserviceaccount.com",
  "client_id": "123456789",
  ...
}
```

### ステップ5: 値を置き換える

`.env.local`ファイルで：

1. **`GOOGLE_SERVICE_ACCOUNT_EMAIL`** に、JSONの`client_email`の値を貼り付け
   ```env
   GOOGLE_SERVICE_ACCOUNT_EMAIL="honma-kaitai-dashboard@your-project.iam.gserviceaccount.com"
   ```

2. **`GOOGLE_SERVICE_ACCOUNT_PRIVATE_KEY`** に、JSONの`private_key`の値を貼り付け
   - **重要**: 改行文字（`\n`）はそのまま含める
   - 全体をダブルクォート（`"`）で囲む
   ```env
   GOOGLE_SERVICE_ACCOUNT_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC...\n-----END PRIVATE KEY-----\n"
   ```

### ステップ6: ファイルを保存

`.env.local`ファイルを保存します。

## ✅ 確認方法

ターミナルで確認：
```bash
cd /Users/kairi.oshima/honma_kaitai/dashboard
ls -la .env.local
```

ファイルが表示されればOKです。

## 📋 完成例

`.env.local`ファイルの完成例：

```env
# Google Sheets (サービスアカウント情報)
GOOGLE_SERVICE_ACCOUNT_EMAIL="honma-kaitai-dashboard@my-project-123456.iam.gserviceaccount.com"
GOOGLE_SERVICE_ACCOUNT_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC7vJ...\n-----END PRIVATE KEY-----\n"

# Google Sheets ID (後で設定)
GOOGLE_SHEETS_ID=""
```

## ⚠️ 注意事項

1. **`.env.local`は`.gitignore`に含まれているので、Gitにはコミットされません**（安全）
2. **`private_key`の改行文字（`\n`）は削除しないでください**
3. **値は必ずダブルクォート（`"`）で囲んでください**

## 🚀 次のステップ

`.env.local`ファイルを作成したら、次は：
```bash
npm run sheets:create
```
を実行してGoogle Sheetsを作成します。

