# PoC要件定義書：重機稼働予測ダッシュボード

## 1. プロジェクト概要

### 1.1 目的
本間解体工業様の重機管理・予測システムのPoC（プロトタイプ）を構築し、ユーザーに実際に触ってもらい、システムの価値を体感してもらう。

### 1.2 PoCの位置づけ
- **フェーズ1（管理・可視化）**: 現状の重機データを管理・可視化する
- **フェーズ2（予測・推奨）**: AI/MLを活用した予測・推奨機能（将来拡張）

### 1.3 想定ユーザー
- 経営層（社長、副社長）
- 企画部長
- 整備部署の所長
- 現場担当者

---

## 2. 機能要件

### 2.1 フェーズ1：管理・可視化機能（PoCで実装）

#### 2.1.1 全社サマリービュー
**目的**: 経営層が全体像を一目で把握できる

**表示内容**:
- **主要KPIカード**
  - 総重機台数
  - 稼働中台数 / 整備中台数 / 入庫中台数
  - 全体稼働率（%）
  - 今月の総稼働時間
  - 今月の総メンテナンスコスト
  - 今月の総消耗品コスト

- **グラフ・チャート**
  - 稼働率の推移（月次、過去6ヶ月）
  - 重機クラス別の稼働率比較（棒グラフ）
  - メーカー別（コベルコ/日立）の稼働状況
  - コスト内訳（整備費/消耗品費）の円グラフ

- **アラート・通知**
  - 故障リスクが高い重機の件数
  - 特自検期限が近い重機の件数
  - 稼働率が低い重機（40%未満）の件数

#### 2.1.2 重機一覧ビュー
**目的**: 全重機の状況を一覧で確認

**表示内容**:
- **テーブル形式の一覧**
  - 管理番号
  - メーカー（コベルコ/日立）
  - 重機クラス（例：SK235、ZX200）
  - ステータス（稼働中/整備中/入庫中）
  - 累計稼働時間
  - 今月の稼働時間
  - 稼働率（%）
  - 故障リスクスコア（★1〜5）
  - 年間コスト（整備費+消耗品費）
  - 最終メンテナンス日

- **フィルター機能**
  - メーカーで絞り込み
  - 重機クラスで絞り込み
  - ステータスで絞り込み
  - 故障リスクスコアで絞り込み

- **ソート機能**
  - 稼働率順
  - コスト順
  - 故障リスクスコア順

#### 2.1.3 重機個別ビュー
**目的**: 特定の重機の詳細情報を確認

**表示内容**:
- **基本情報**
  - 管理番号、シリアル番号
  - メーカー、重機クラス、型式
  - 年式、購入年月
  - 現在のステータス

- **稼働状況**
  - 累計稼働時間
  - 月次稼働時間の推移（折れ線グラフ、過去12ヶ月）
  - 日次稼働時間（直近30日）
  - 稼働率の推移

- **メンテナンス履歴**
  - メンテナンス実施日一覧
  - メンテナンス種別（特自検、オイル交換、部品交換など）
  - メンテナンスコスト
  - 次回メンテナンス予定日

- **故障・不調情報**
  - 故障リスクスコア（★1〜5）
  - 不調チェック項目の履歴
  - 故障コード履歴
  - 故障傾向のグラフ

- **コスト情報**
  - 年間コスト内訳
    - 整備費
    - 消耗品費（オイル、フィルターなど）
    - 部品交換費
  - 月次コスト推移（棒グラフ）
  - 1時間あたりのコスト

#### 2.1.4 故障リスク分析ビュー
**目的**: 故障しやすい重機の状況を把握

**表示内容**:
- **故障リスクランキング**
  - 故障リスクスコアが高い重機TOP10
  - 各重機のリスク要因（不調項目数、メンテ頻度など）

- **故障傾向分析**
  - 重機クラス別の故障発生率
  - メーカー別の故障発生率
  - 年式別の故障発生率
  - 不調チェック項目の出現頻度

- **要注意重機リスト**
  - 故障リスクスコアが4以上（★4〜5）の重機一覧
  - 各重機の推奨アクション（整備推奨、買い替え検討など）

#### 2.1.5 稼働ランキングビュー
**目的**: 重機の稼働状況をランキングで可視化

**表示内容**:
- **稼働時間ランキング**
  - 月次稼働時間TOP10（ベスト）
  - 月次稼働時間ワースト10
  - 累計稼働時間ランキング

- **稼働率ランキング**
  - 稼働率TOP10
  - 稼働率ワースト10（リース候補）

- **コスト効率ランキング**
  - 1時間あたりコストが低い重機TOP10（効率的）
  - 1時間あたりコストが高い重機TOP10（非効率）

- **比較分析**
  - 重機クラス別の平均稼働率
  - メーカー別の平均稼働率

#### 2.1.6 消耗品管理ビュー
**目的**: 消耗品の使用状況とコストを可視化

**表示内容**:
- **消耗品別の使用状況**
  - 消耗品の種類（オイル、フィルター、グリスなど）
  - 各消耗品の使用量（月次、年間）
  - 消耗率（使用量/稼働時間）
  - 単価
  - 総コスト

- **消耗品コスト分析**
  - 消耗品別の年間コスト（円グラフ）
  - 月次消耗品コストの推移（折れ線グラフ）
  - 重機別の消耗品コスト（テーブル）

- **消耗品ランキング**
  - 使用量が多い消耗品TOP10
  - コストが高い消耗品TOP10

- **予測（簡易版）**
  - 現在のペースでの来月の消耗品必要量（簡易計算）
  - 年間消耗品コストの見積もり

#### 2.1.7 コスト分析ビュー
**目的**: 重機にかかっているコストを詳細に分析

**表示内容**:
- **総コストサマリー**
  - 年間総コスト（整備費+消耗品費+部品交換費）
  - 月次コスト推移（折れ線グラフ）
  - 重機1台あたりの平均年間コスト

- **コスト内訳**
  - 整備費の内訳（特自検、オイル交換、その他）
  - 消耗品費の内訳（オイル、フィルター、グリスなど）
  - 部品交換費の内訳

- **重機別コストランキング**
  - 年間コストが高い重機TOP10
  - 年間コストが低い重機TOP10
  - 1時間あたりコストが高い重機TOP10

- **コスト比較分析**
  - 重機クラス別の平均年間コスト
  - メーカー別の平均年間コスト
  - 年式別の平均年間コスト

- **コスト予測（簡易版）**
  - 現在のペースでの年間コスト見積もり
  - 月次コストの予測（移動平均ベース）

---

## 3. データ要件

### 3.1 データソース（PoC用）

#### 3.1.1 重機マスタデータ
**ソース**: kintone（重機マスタアプリ）

**必要な項目**:
- 管理番号（主キー）
- シリアル番号
- メーカー（コベルコ/日立）
- 重機クラス（例：SK235、ZX200）
- 型式
- 年式
- 購入年月
- 特自検期限
- ステータス（稼働中/整備中/入庫中）

#### 3.1.2 メンテナンス記録データ
**ソース**: kintone（メンテナンス記録アプリ）

**必要な項目**:
- メンテナンスID
- 管理番号（重機との紐付け）
- 実施日
- メンテナンス種別（特自検、オイル交換、部品交換など）
- コスト
- 不調チェック項目（オイル漏れ、アイドリング不安定など、10項目程度）
- 実施内容

#### 3.1.3 稼働時間データ
**ソース**: 
- kintone（アワーメーター確認アプリ）
- テレマティクスシステム（コベルコ/日立）※将来拡張

**必要な項目**:
- 管理番号（重機との紐付け）
- 日付
- 稼働時間（時間）
- アイドリング時間（時間）
- 累計稼働時間

#### 3.1.4 消耗品使用データ
**ソース**: kintone（メンテナンス記録アプリから抽出）

**必要な項目**:
- 消耗品ID
- 管理番号（重機との紐付け）
- 使用日
- 消耗品種別（オイル、フィルター、グリスなど）
- 使用量
- 単価
- コスト

### 3.2 データ取得方法（PoC）

**オプション1: CSVエクスポート**
- kintoneからCSVエクスポート
- 手動アップロードまたは定期アップロード

**オプション2: kintone REST API**
- 既存のAWS Lambda基盤を活用
- 定期バッチでデータ取得

**オプション3: サンプルデータ**
- PoC用のサンプルデータを用意
- 実際のデータ構造に合わせたダミーデータ

### 3.3 データ更新頻度（PoC）

- **初期**: 手動更新または1日1回のバッチ更新
- **将来的**: 2〜3時間おきの自動更新

---

## 4. 画面設計

### 4.1 画面構成

```
┌─────────────────────────────────────┐
│  ヘッダー（ロゴ、ナビゲーション）    │
├─────────────────────────────────────┤
│                                     │
│  サイドバー（メニュー）              │
│  - 全社サマリー                     │
│  - 重機一覧                         │
│  - 重機個別                         │
│  - 故障リスク分析                   │
│  - 稼働ランキング                   │
│  - 消耗品管理                       │
│  - コスト分析                       │
│                                     │
├─────────────────────────────────────┤
│                                     │
│  メインコンテンツエリア              │
│  （各ビューの内容）                  │
│                                     │
└─────────────────────────────────────┘
```

### 4.2 UI/UX要件

- **レスポンシブデザイン**: PC、タブレット（iPad）対応
- **直感的な操作**: クリック数が少ない
- **視認性**: 重要な数値は大きく表示
- **色使い**: 
  - 正常: 緑系
  - 注意: 黄系
  - 警告: 赤系
- **グラフ**: Chart.js、D3.js、またはRechartsを使用

---

## 5. 技術要件

### 5.1 フロントエンド

**推奨技術スタック**:
- **フレームワーク**: React / Next.js または Vue.js / Nuxt.js
- **UIライブラリ**: Material-UI / Chakra UI / Tailwind CSS
- **グラフライブラリ**: Recharts / Chart.js / D3.js
- **状態管理**: React Query / Zustand / Redux

### 5.2 バックエンド

**推奨技術スタック**:
- **API**: REST API または GraphQL
- **データベース**: PostgreSQL / MySQL
- **データ処理**: Python（Pandas、NumPy）または Node.js
- **バッチ処理**: AWS Lambda / Azure Functions

### 5.3 インフラ

**既存環境の活用**:
- **クラウド**: AWS / Azure（既存環境）
- **サーバーレス**: AWS Lambda（既存）
- **データストレージ**: S3 / Azure Blob Storage

### 5.4 外部連携

- **kintone**: REST API
- **テレマティクス**: 既存API連携（将来拡張）

---

## 6. PoCの実装範囲

### 6.1 フェーズ1（PoC）で実装する機能

✅ **実装する機能**:
1. 全社サマリービュー
2. 重機一覧ビュー
3. 重機個別ビュー（基本情報、稼働状況、メンテ履歴、コスト）
4. 故障リスク分析ビュー（ランキング、傾向分析）
5. 稼働ランキングビュー
6. 消耗品管理ビュー（使用状況、コスト分析）
7. コスト分析ビュー（総コスト、内訳、ランキング）

### 6.2 フェーズ1（PoC）で実装しない機能（将来拡張）

❌ **実装しない機能**:
1. AI/MLによる故障予測（フェーズ2）
2. 買い替え時期の推測（フェーズ2）
3. 消耗品の来期予測（フェーズ2）
4. テレマティクスリアルタイム連携（フェーズ2）
5. 権限管理・ロール別表示（フェーズ2）
6. アラート通知機能（フェーズ2）

### 6.3 PoCのデータ要件

**最小限のデータ**:
- 重機マスタ: 10〜20台程度のサンプルデータ
- メンテナンス記録: 過去6ヶ月分
- 稼働時間データ: 過去6ヶ月分
- 消耗品データ: 過去6ヶ月分

---

## 7. 成功基準（PoC）

### 7.1 機能面

- ✅ 全社サマリーで主要KPIが表示される
- ✅ 重機一覧で全重機の状況が確認できる
- ✅ 重機個別で詳細情報が確認できる
- ✅ 故障リスクランキングが表示される
- ✅ 稼働ランキングが表示される
- ✅ 消耗品の使用状況とコストが可視化される
- ✅ コスト分析ができる

### 7.2 ユーザビリティ

- ✅ 経営層がiPadで操作できる
- ✅ 直感的に操作できる
- ✅ 重要な情報が一目で分かる
- ✅ グラフが分かりやすい

### 7.3 パフォーマンス

- ✅ 画面遷移がスムーズ（3秒以内）
- ✅ データ読み込みが速い（5秒以内）

---

## 8. 開発スケジュール（案）

### フェーズ1: 要件定義・設計（1週間）
- 要件定義書の確定
- 画面設計の確定
- データ設計の確定

### フェーズ2: データ準備（1週間）
- サンプルデータの作成
- データ取得・変換スクリプトの作成

### フェーズ3: フロントエンド開発（2〜3週間）
- 画面実装
- グラフ実装
- UI/UX調整

### フェーズ4: バックエンド開発（1〜2週間）
- API実装
- データ処理ロジック実装

### フェーズ5: 統合・テスト（1週間）
- 統合テスト
- ユーザビリティテスト
- バグ修正

### フェーズ6: デモ準備（1週間）
- デモデータの最終調整
- デモシナリオの作成
- プレゼン資料の作成

**合計: 6〜8週間**

---

## 9. 次のステップ

1. **要件定義書の承認**: 本間解体工業様に確認・承認いただく
2. **データ提供**: kintoneからのサンプルデータ提供
3. **技術スタックの確定**: フロントエンド・バックエンドの技術選定
4. **開発環境の準備**: 開発環境・本番環境の構築
5. **開発開始**: フェーズ2から開発を開始

---

## 10. 補足・注意事項

### 10.1 データの取り扱い
- PoC用のサンプルデータを使用
- 実際のデータを使用する場合は、匿名化・マスキングを実施

### 10.2 セキュリティ
- PoC段階では簡易的な認証で対応
- 本番環境では適切な認証・認可を実装

### 10.3 拡張性
- フェーズ2（AI/ML予測）を想定した設計
- テレマティクス連携を想定した設計

---

## 11. 参考資料

- ヒアリングシート: `hearing_sheet.csv`
- ヒアリング項目: `ヒアリング項目_重機稼働予測.md`
- 既存システム: kintone（重機マスタ、メンテナンス記録アプリ）

