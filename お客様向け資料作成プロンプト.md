# お客様向け資料作成プロンプト

## 資料の目的
本間解体工業様向けの「重機稼働予測ダッシュボード」プロジェクトの提案資料を作成する。

## 📄 A4 1枚版
簡潔版のプロンプトは `お客様向け資料作成プロンプト_A4版.md` を参照してください。

## 資料の構成

### 1. 表紙・タイトル
- プロジェクト名: 重機稼働予測ダッシュボード
- クライアント名: 本間解体工業様
- 日付: 2024年12月
- バージョン: PoC版

### 2. プロジェクト概要
- **背景・課題**
  - 重機の故障率を定量的に把握したい
  - 買い替え時期を推測したい
  - メンテナンスコストの見える化
  - 消耗品の来期予測をしたい
  - 職人の肌感覚を定量的に客観化したい

- **プロジェクトの目的**
  - 各重機の故障率を算出
  - 買い替え時期の推測
  - AI/MLモデルの構築（将来拡張）
  - 消耗品の来期予測
  - メンテナンスコストがかかってなく、故障リスクが低い重機の推薦

- **期待される効果**
  - 重機コストの見える化
  - 故障予防によるダウンタイム削減
  - 買い替えタイミングの最適化
  - 消耗品の適正在庫管理
  - データに基づく意思決定の実現

### 3. システム構成・アーキテクチャ

#### 3.1 技術スタック
- **フロントエンド**: Next.js 14 (React) + TypeScript
- **UI**: shadcn/ui + Tailwind CSS
- **グラフ**: Recharts
- **状態管理**: TanStack Query + Zustand
- **バックエンド**: Next.js API Routes
- **データベース**: PostgreSQL + Prisma（将来拡張）
- **データソース**: Google Sheets（PoC）→ kintone（本番）
- **インフラ**: AWS / Azure（既存環境活用）
- **デプロイ**: Vercel（PoC）→ AWS（本番）

#### 3.2 データフロー
```
kintone / Google Sheets
    ↓
データ変換・正規化処理
    ↓
PostgreSQL（データマート）
    ↓
REST API
    ↓
Next.js ダッシュボード
```

#### 3.3 外部連携
- **kintone**: 重機マスタ、メンテナンス記録、稼働時間、消耗品データ
- **テレマティクス**: コベルコ/日立のテレマティクスシステム（将来拡張）

### 4. 機能一覧・制作物

#### 4.1 PoC版で実装する機能

**✅ 実装済み**
- 全社サマリービュー
  - 主要KPIカード（総重機台数、稼働中、整備中、入庫中、稼働率、総コスト）
  - アラート・通知（故障リスク、特自検期限、稼働率）
- 重機一覧ビュー
  - 全重機の一覧表示（テーブル形式）
  - 管理番号、メーカー、クラス、ステータス、稼働時間、稼働率、故障リスク、コスト
- 稼働ランキングビュー
  - 月次稼働時間 TOP10
  - 稼働率 TOP10
  - 稼働率が低い重機（リース候補）
  - コスト効率ランキング
- 消耗品管理ビュー
  - 消耗品別の使用状況（テーブル）
  - 消耗品コスト内訳（円グラフ）
  - 月次使用量とコスト（棒グラフ）
  - 使用量・コストランキング
- コスト分析ビュー
  - コストサマリーカード
  - 月次コスト推移（折れ線グラフ）
  - コスト内訳（円グラフ）
  - 重機別コストランキング

**⏳ 実装予定（PoC完成まで）**
- 故障リスク分析ビュー
  - 故障リスクランキング TOP10
  - 重機クラス別・メーカー別の故障傾向分析
  - 要注意重機リスト（★4以上）
  - 不調チェック項目の出現頻度
- 重機個別ビュー
  - 基本情報（管理番号、メーカー、クラス、年式など）
  - 稼働状況（月次稼働時間の推移グラフ、累計稼働時間）
  - メンテナンス履歴（実施日、種別、コスト）
  - 故障・不調情報（故障リスクスコア、不調項目）
  - コスト情報（年間コスト内訳、月次コスト推移、1時間あたりコスト）

#### 4.2 本番環境で追加する機能

**認証・認可**
- ロールベースのアクセス制御
  - 経営層: 全社サマリー、現場別状況、重機個別のコスト・故障予兆までフルアクセス
  - 企画／管理部門: 全社・部門別の集計値とダッシュボード全体
  - 整備部署: 重機・アタッチメント・消耗品に関する詳細データと故障予兆はフルアクセス
  - 現場所長／現場担当: 担当現場に紐づく重機・アタッチメントの情報と整備指示・与実入力画面
- 認証方式: NextAuth.js（OAuth、JWT）
- セッション管理: 自動セッション管理

**データ更新機能**
- 自動更新機能（バッチ処理）
- 更新頻度: 1日1回（初期）→ 2〜3時間おき（将来的）
- 更新ログの表示

**機能拡張**
- 重機一覧のフィルター・ソート機能強化
- エクスポート機能（CSV、PDF）
- アラート通知機能（メール、LINE Works連携）

#### 4.3 将来拡張機能（フェーズ2以降）

**AI/ML予測機能**
- 故障リスク予測（一定期間内に不調が発生する確率）
- 買い替え／売却に適したタイミングの推定
- 来期以降の消耗品必要量とコストの予測
- 案件情報から必要重機台数・工期の予測
- 余剰重機のリース余力と収益ポテンシャルの試算

**テレマティクス連携**
- コベルコ/日立のテレマティクスシステムとのリアルタイム連携
- 位置情報、燃料消費量、故障コードの取得

### 5. 開発スケジュール（バッファ込み）

#### フェーズ1: PoC完成（3-4週間）

**Week 1: 必須機能の完成**
- Day 1-2: 故障リスク分析ページの実装
- Day 3-4: 重機個別ページの実装
- Day 5: フィルター・ソート機能、エラーハンドリング改善

**Week 2: データ連携**
- Day 1-3: Google Sheets連携（設定、API実装、データ変換）
  - バッファ: 外部連携は想定外の課題が発生しやすいため
- Day 4-5: データ検証、動作確認、バグ修正

**Week 3: UI/UX改善と最終調整**
- Day 1-3: レスポンシブ対応、UI改善
- Day 4-5: 統合テスト、ユーザビリティテスト、最終調整

**実工数**: 10-13営業日
**バッファ**: 5-7営業日（約50%）
**合計**: 15-20営業日（約3-4週間）

**マイルストーン**: PoC完成、モックデータで全機能が動作、基本的なUI/UXが完成

#### フェーズ2: 本番準備（4-5週間）

**Week 4-5: 機能拡張**
- 重機個別ページの拡張
- データ更新機能
- 権限管理（認証・認可）
  - バッファ: 認証・認可は複雑なため

**Week 6-7: テスト・調整**
- 結合テスト、ユーザビリティテスト
- パフォーマンステスト、セキュリティテスト
- バグ修正、UI/UXの微調整
- 本番環境へのデプロイ準備

**実工数**: 11-14営業日
**バッファ**: 9-11営業日（約70%）
**合計**: 20-25営業日（約4-5週間）

**マイルストーン**: 全機能が実装、テスト完了、本番環境へのデプロイ準備完了

#### フェーズ3: 予測機能（将来拡張、6-8週間）

**Week 8-10: AI/ML機能の実装**
- データ準備、特徴量エンジニアリング
- モデル開発（故障予測、買い替え時期予測、消耗品予測）
- ダッシュボードへの統合

**実工数**: 18-25営業日
**バッファ**: 10-15営業日（約50%）
**合計**: 28-40営業日（約6-8週間）

**マイルストーン**: AI/ML予測機能が実装され、ダッシュボードで利用可能

#### バッファを設けた理由
- 外部連携の不確実性（API仕様変更、データ品質問題）
- 認証・認可の複雑さ（セキュリティ要件の追加）
- データ品質の問題（不整合、欠損データの対応）
- 要件の変更・追加（ユーザーフィードバックによる変更）
- 技術的な課題（予期しないバグ、パフォーマンス問題）

### 6. セキュリティ・認証認可

#### 6.1 認証方式
- **PoC段階**: 簡易認証（開発環境）
- **本番環境**: NextAuth.js
  - OAuth 2.0対応
  - JWT トークンベースの認証
  - セッション管理

#### 6.2 認可（ロールベースアクセス制御）
- **経営層**
  - アクセス範囲: 全社サマリー、現場別状況、重機個別のコスト・故障予兆までフルアクセス
  - 権限: 閲覧・ダウンロード
  
- **企画／管理部門**
  - アクセス範囲: 全社・部門別の集計値とダッシュボード全体
  - 権限: 閲覧・ダウンロード

- **整備部署**
  - アクセス範囲: 重機・アタッチメント・消耗品に関する詳細データと故障予兆はフルアクセス
  - 権限: 閲覧・編集（メンテナンス記録の入力）

- **現場所長／現場担当**
  - アクセス範囲: 担当現場に紐づく重機・アタッチメントの情報と整備指示・与実入力画面
  - 権限: 閲覧・編集（与実入力）

- **対外向け（メーカー等）**
  - アクセス範囲: 匿名化・集計レベルにした統計値（クラス別稼働時間や故障傾向など）のみ
  - 権限: 閲覧のみ

#### 6.3 データセキュリティ
- **データマスキング**: 対外説明時は個人情報・機密情報をマスキング
- **通信の暗号化**: HTTPS必須
- **データベースアクセス制御**: 読み取り専用ユーザーでAPI接続
- **環境変数管理**: 機密情報は環境変数で管理

### 7. データソース・連携

#### 7.1 PoC段階
- **データソース**: Google Sheets
- **更新頻度**: 手動更新または1日1回
- **データ量**: サンプルデータ（15台の重機、過去6ヶ月分）

#### 7.2 本番環境
- **データソース**: kintone
  - 重機マスタ
  - メンテナンス記録アプリ
  - アワーメーター確認アプリ
  - 消耗品マスタ／使用実績
  - 案件管理アプリ
- **更新頻度**: 1日1回（初期）→ 2〜3時間おき（将来的）
- **取得方法**: kintone REST API

#### 7.3 将来拡張
- **テレマティクスシステム**: コベルコ/日立
  - 累計稼働時間、日次稼働時間
  - 位置情報、燃料消費量
  - 故障コード

### 8. 画面イメージ・UI/UX

#### 8.1 デザイン方針
- **モダンで使いやすいUI**: 直感的な操作
- **レスポンシブデザイン**: PC、タブレット（iPad）対応
- **視認性**: 重要な数値は大きく表示
- **色使い**: 正常（緑）、注意（黄）、警告（赤）で状態を視覚化

#### 8.2 主要画面
- 全社サマリー: KPIカード、グラフ、アラート
- 重機一覧: テーブル形式、フィルター・ソート
- 重機個別: 詳細情報、グラフ、履歴
- 故障リスク分析: ランキング、傾向分析
- 稼働ランキング: 複数のランキング表示
- 消耗品管理: テーブル、グラフ、ランキング
- コスト分析: サマリー、グラフ、ランキング

### 9. 成果物・納品物

#### 9.1 PoC版
- ダッシュボードアプリケーション（デプロイ済み）
- ソースコード（Gitリポジトリ）
- 技術ドキュメント
- ユーザーマニュアル（簡易版）
- セットアップガイド

#### 9.2 本番版
- ダッシュボードアプリケーション（本番環境デプロイ済み）
- ソースコード（Gitリポジトリ）
- 技術ドキュメント（詳細版）
- ユーザーマニュアル
- 管理者マニュアル
- API仕様書
- データベース設計書
- セキュリティドキュメント

### 10. 費用・工数見積もり（バッファ込み）

#### 10.1 PoC版
- **実開発工数**: 10-13営業日
- **バッファ**: 5-7営業日（約50%）
- **合計**: 15-20営業日（約3-4週間）
- **内容**: 全機能の実装、モックデータでの動作確認、テスト・調整
- **安全マージン**: 想定外の課題、データ品質問題、外部連携の遅延に対応

#### 10.2 本番版
- **実開発工数**: 11-14営業日
- **バッファ**: 9-11営業日（約70%）
- **合計**: 20-25営業日（約4-5週間）
- **内容**: 認証・認可、データ連携、テスト、調整、本番環境へのデプロイ準備
- **安全マージン**: 認証・認可の複雑さ、kintone連携の課題、セキュリティ要件の追加に対応

#### 10.3 予測機能（将来拡張）
- **実開発工数**: 18-25営業日
- **バッファ**: 10-15営業日（約50%）
- **合計**: 28-40営業日（約6-8週間）
- **内容**: AI/MLモデル開発、統合、テスト
- **安全マージン**: モデル開発の不確実性、データ準備の遅延、精度調整に時間がかかる可能性に対応

#### バッファの考え方
- **リスク管理**: 想定外の課題や要件変更に対応するための余裕
- **品質確保**: 十分なテスト時間とバグ修正時間を確保
- **ユーザー満足度**: ユーザーフィードバックを反映する時間を確保
- **炎上防止**: 無理なスケジュールによる品質低下や納期遅延を防ぐ

### 11. リスク・課題

#### 11.1 技術的リスク
- **データ品質**: kintoneのデータ品質に依存
- **パフォーマンス**: データ量が増えた場合の対応
- **外部連携**: テレマティクスシステムのAPI仕様変更

#### 11.2 運用リスク
- **データ更新**: 定期的なデータ更新の仕組みが必要
- **メンテナンス**: 継続的なメンテナンス体制

#### 11.3 対策
- PoC段階でデータ品質を確認
- パフォーマンステストを実施
- 外部連携の仕様を事前に確認
- 運用マニュアルを作成

### 12. 次のステップ

#### 12.1 PoC完成まで
1. 故障リスク分析ページの実装
2. 重機個別ページの実装
3. Google Sheets連携の実装
4. 最終調整・動作確認

#### 12.2 本番移行に向けて
1. kintone連携の実装
2. 認証・認可機能の実装
3. テスト・調整
4. 本番環境へのデプロイ

---

## 資料作成時の注意事項

### 含めるべき要素
- ✅ プロジェクトの背景・課題
- ✅ 解決策・システム概要
- ✅ 機能一覧（実装済み・実装予定）
- ✅ 開発スケジュール（フェーズ別）
- ✅ 認証・認可の設計
- ✅ データソース・連携方法
- ✅ 画面イメージ（スクリーンショット）
- ✅ 成果物・納品物
- ✅ 工数見積もり
- ✅ リスク・課題と対策
- ✅ 次のステップ

### トンマナ（別ファイルで指定）
- トーン&マナーは別ファイルで指定されるため、プロンプトには含めない
- 指定されたトンマナに従ってデザインを適用

### 資料の形式
- PowerPoint / Keynote形式を推奨
- PDF形式でも可
- 印刷用とプレゼン用の2バージョンがあると良い

### 対象読者
- 経営層（社長、副社長）
- 企画部長
- 整備部署の所長
- IT担当者

---

## プロンプト例

```
本間解体工業様向けの「重機稼働予測ダッシュボード」プロジェクトの提案資料を作成してください。

【資料の構成】
1. 表紙・タイトル
2. プロジェクト概要（背景・課題、目的、期待される効果）
3. システム構成・アーキテクチャ（技術スタック、データフロー、外部連携）
4. 機能一覧・制作物（実装済み、実装予定、将来拡張）
5. 開発スケジュール（フェーズ1: PoC完成 2-3週間、フェーズ2: 本番準備 3週間、フェーズ3: 予測機能 4-5週間）
6. セキュリティ・認証認可（認証方式、ロールベースアクセス制御、データセキュリティ）
7. データソース・連携（PoC段階、本番環境、将来拡張）
8. 画面イメージ・UI/UX（デザイン方針、主要画面）
9. 成果物・納品物（PoC版、本番版）
10. 費用・工数見積もり（フェーズ別）
11. リスク・課題と対策
12. 次のステップ

【重要なポイント】
- 認証・認可の設計を詳しく説明（ロール別のアクセス範囲、権限）
- スケジュールはフェーズ別に明確に示す
- 実装済み機能と実装予定機能を区別する
- 画面イメージ（スクリーンショット）を含める
- 技術的な詳細とビジネス価値のバランスを取る

【トンマナ】
- トーン&マナーは別ファイルで指定されるため、指定に従ってデザインを適用してください。

【対象読者】
- 経営層、企画部長、整備部署の所長、IT担当者
```

---

## 補足情報

### 参考資料
- PoC要件定義書: `PoC要件定義_重機稼働予測ダッシュボード.md`
- データ設計書: `データ設計書_重機稼働予測.md`
- 技術スタック選定: `技術スタック選定_重機稼働予測.md`
- 画面設計書: `画面設計書_重機稼働予測.md`
- 開発スケジュール: `dashboard/開発スケジュール.md`
- ヒアリングシート: `hearing_sheet.csv`

### 画面スクリーンショット
- 全社サマリーページ
- 重機一覧ページ
- 稼働ランキングページ
- 消耗品管理ページ
- コスト分析ページ

